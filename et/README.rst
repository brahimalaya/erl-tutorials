=============
Erlang Trader
=============

About
-----
* Automated trading system simulation based upon technical analysis

Author
------
Ivan Ribeiro Rocha <ivan.ribeiro@gmail.com> 

===========
Sample Data
===========

From inside **et/src** directory, type::

 [irocha@napoleon src (master)]$ more ../priv/etrader.csv 
 UOLL4,2005-12-16,23.9008,23.9008,20.61444,20.9132,1.10441E+07,0
 UOLL4,2005-12-19,20.31568,21.31154,19.03101,19.61857,3578600,0
 UOLL4,2005-12-20,19.91733,20.47502,19.4194,20.1165,1480800,0
 UOLL4,2005-12-21,20.51485,20.84349,19.87749,19.91733,1191700,0
 UOLL4,2005-12-22,19.98704,20.56464,19.89741,20.46506,265000,0
 UOLL4,2005-12-23,20.50489,20.71402,20.1165,20.1165,100300,0
 UOLL4,2005-12-26,20.19617,20.41526,20.1165,20.15634,106300,0
 UOLL4,2005-12-27,20.15634,20.47502,20.01692,20.1165,232500,0
 UOLL4,2005-12-28,20.07667,20.1165,19.22022,19.27002,807600,0
 UOLL4,2005-12-29,19.39948,19.71816,19.39948,19.61857,213500,0
 UOLL4,2006-01-02,19.71816,19.91733,19.19035,19.86754,191800,0
 UOLL4,2006-01-03,19.81774,20.51485,19.31981,20.51485,556200,0
 UOLL4,2006-01-04,20.55468,21.21196,20.12646,21.21196,694200,0
 ...

=======
Running
=======

From inside **et/src** directory, type::

 [irocha@napoleon src (master)]$ erl -make && erl -pa ../ebin +K true +A 42 +B -run etrader_app start -etrader limit 100
 Erlang R14B02 (erts-5.8.3) [source] [smp:2:2] [rq:2] [async-threads:42] [kernel-poll:true]

 etrader server started {etrs,"../priv/etrader.csv",10000,100,undefined}...
 Eshell V5.8.3  (abort with ^G)

 1> etrader:load("UOLL4").
 {ok, 100}

 2> etrader:sma(21).
 {ok,{array,100,0,undefined,
            {10,10,
             {20.281533333333332,20.219884285714286,20.219884285714283,
              20.18716333333333,20.16914285714285,20.060071428571423,
              19.937248095238093,19.871805238095238,19.786445238095236,
              19.53273619047619},
             {19.290882857142858,19.07748285714286,18.859340476190475,
              18.673919523809527,18.519797142857147,18.330582380952382,
              18.126666666666672,17.93697761904762,17.747289047619052,
              17.52677571428572},
             {17.337086666666668,17.154985238095236,16.967193333333334,
              16.744309047619048,16.5626819047619,16.376786666666664,
              16.24400476190476,16.143943809523808,15.994089523809524,
              15.877905238095238},
             {15.991718571428573,16.14346952380952,16.225984285714286,
              16.24732476190476,16.16575857142857,16.04672904761905,
              15.968008095238096,15.920585714285716,15.875534761904765,
              15.859410952380953},
             {15.866998571428574,15.857514285714288,15.839493809523812,
              15.814360000000002,15.815308571428575,15.785432380952383,
              15.75745333333334,15.76456666666667,15.751762857142861,
              15.718567619047622},
             {15.685371904761908,15.618980952380953,15.500425714285711,
              15.451106190476187,15.422652380952378,15.407002857142853,
              15.416961428571422,15.416961428571426,15.388508095238091,
              15.35768333333333},
             {15.28370476190476,15.252406190476192,15.252406190476192,
              15.289395714285718,15.34535380952381,15.391353333333333,
              15.403209047619049,15.41411619047619,15.378549523809522,
              15.36764238095238},
             {15.38661095238095,15.391353333333333,15.426445714285714,
              15.462012380952379,15.459641428571429,15.483352857142858,
              15.505167142857143,15.481456190476191,15.436405238095238,
              15.332076666666664},
             10}}}

 3> etrader:ema(21).
 {ok,{array,100,0,undefined,
            {10,10,
             {20.281533333333332,20.221263939393936,20.166473581267212,
              20.09946325569746,20.048502959724967,19.87814450884088,
              19.665332280764435,19.585032982513123,19.47038816592102,
              18.96781924174638},
             {18.565258401587617,18.276247637806925,18.063303307097204,
              17.99555937008837,17.971092154625786,17.89090832238708,
              17.776368474897346,17.67224134081577,17.58663394619615,
              17.40922176926923},
             {17.275097972062934,17.135060883693576,17.002322621539612,
              16.814656928672374,16.70561448061125,16.608294982373863,
              16.497189983976238,16.40071180361476,16.331110730558876,
              16.290470664144433},
             {16.294265149222213,16.424461044747463,16.487596404315877,
              16.47799764028716,16.398655127533782,16.29212284321253,
              16.214287130193206,16.161633754721095,16.118294322473723,
              16.143173020430655},
             {16.111470018573325,16.07721728961211,16.011675717829192,
              15.933080652571993,15.844429684156356,15.766553349233051,
              15.701188499302773,15.686127726638883,15.638938842398984,
              15.575217129453621},
             {15.53992102677602,15.485200933432745,15.462615394029768,
              15.519035812754334,15.54316710250394,15.518932820458128,
              15.511387109507389,15.504527372279444,15.46207761116313,
              15.423486919239208},
             {15.370298108399279,15.349104643999343,15.384157858181222,
              15.45223805289202,15.531330048083655,15.567019134621503,
              15.53699557692864,15.5133223426624,15.447440311511272,
              15.401127555919338},
             {15.395237778108488,15.385357071007714,15.411682791825195,
              15.463680719841086,15.51547792712826,15.585199933752962,
              15.59878993977542,15.538718127068563,15.443367388244148,
              15.207304898403772},
             10}}}

================
Verifying with R
================

Executing **R**, using library **quantmod**::

 [irocha@napoleon src (master)]$ R

 R version 2.12.1 (2010-12-16)
 Copyright (C) 2010 The R Foundation for Statistical Computing
 ISBN 3-900051-07-0
 Platform: i686-pc-linux-gnu (32-bit)

 R is free software and comes with ABSOLUTELY NO WARRANTY.
 You are welcome to redistribute it under certain conditions.
 Type 'license()' or 'licence()' for distribution details.

   Natural language support but running in an English locale

 R is a collaborative project with many contributors.
 Type 'contributors()' for more information and
 'citation()' on how to cite R or R packages in publications.

 Type 'demo()' for some demos, 'help()' for on-line help, or
 'help.start()' for an HTML browser interface to help.
 Type 'q()' to quit R.

 > library(quantmod)
 Loading required package: Defaults
 Loading required package: xts
 Loading required package: zoo
 Loading required package: TTR

 > uol <- read.csv(file="/data/bovespa/etrader.csv", header=FALSE)

 > SMA(uol[[5]][1:100], n=21)
   [1]       NA       NA       NA       NA       NA       NA       NA       NA
   [9]       NA       NA       NA       NA       NA       NA       NA       NA
  [17]       NA       NA       NA       NA 20.28153 20.21988 20.21988 20.18716
  [25] 20.16914 20.06007 19.93725 19.87181 19.78645 19.53274 19.29088 19.07748
  [33] 18.85934 18.67392 18.51980 18.33058 18.12667 17.93698 17.74729 17.52678
  [41] 17.33709 17.15499 16.96719 16.74431 16.56268 16.37679 16.24400 16.14394
  [49] 15.99409 15.87791 15.99172 16.14347 16.22598 16.24732 16.16576 16.04673
  [57] 15.96801 15.92059 15.87553 15.85941 15.86700 15.85751 15.83949 15.81436
  [65] 15.81531 15.78543 15.75745 15.76457 15.75176 15.71857 15.68537 15.61898
  [73] 15.50043 15.45111 15.42265 15.40700 15.41696 15.41696 15.38851 15.35768
  [81] 15.28370 15.25241 15.25241 15.28940 15.34535 15.39135 15.40321 15.41412
  [89] 15.37855 15.36764 15.38661 15.39135 15.42645 15.46201 15.45964 15.48335
  [97] 15.50517 15.48146 15.43641 15.33208

 > EMA(uol[[5]][1:100], n=21)
   [1]       NA       NA       NA       NA       NA       NA       NA       NA
   [9]       NA       NA       NA       NA       NA       NA       NA       NA
  [17]       NA       NA       NA       NA 20.28153 20.22126 20.16647 20.09946
  [25] 20.04850 19.87814 19.66533 19.58503 19.47039 18.96782 18.56526 18.27625
  [33] 18.06330 17.99556 17.97109 17.89091 17.77637 17.67224 17.58663 17.40922
  [41] 17.27510 17.13506 17.00232 16.81466 16.70561 16.60829 16.49719 16.40071
  [49] 16.33111 16.29047 16.29427 16.42446 16.48760 16.47800 16.39866 16.29212
  [57] 16.21429 16.16163 16.11829 16.14317 16.11147 16.07722 16.01168 15.93308
  [65] 15.84443 15.76655 15.70119 15.68613 15.63894 15.57522 15.53992 15.48520
  [73] 15.46262 15.51904 15.54317 15.51893 15.51139 15.50453 15.46208 15.42349
  [81] 15.37030 15.34910 15.38416 15.45224 15.53133 15.56702 15.53700 15.51332
  [89] 15.44744 15.40113 15.39524 15.38536 15.41168 15.46368 15.51548 15.58520
  [97] 15.59879 15.53872 15.44337 15.20730

